class e{constructor(t={}){return e.instance?e.instance:(e.instance=this,this.config=[],this.observer,this.options=Object.assign({threshold:[0,1]},t),this.isSupported()&&(this.observer=new IntersectionObserver(e=>{e.forEach(e=>{console.log(e.target.offsetTop),console.log(e.isIntersecting),e.isIntersecting?this._loadElement(e.target,e.intersectionRatio):this._unloadElement(e.target)})},this.options)),this)}isSupported(){return"IntersectionObserver"in window}add(e){const{selector:t}=e;this.config.push(e),document.querySelectorAll(t).forEach(e=>this.observer.observe(e))}_loadElement(e,t){for(let o of this.config){let{selector:s,once:n,onVisible:i}=o;e.matches(s)&&("function"==typeof i&&i(e,t),n&&this.observer.unobserve(e))}}_unloadElement(e){for(let t of this.config){let{selector:o,onHidden:s}=t;e.matches(o)&&"function"==typeof s&&s(e)}}}export default e;
