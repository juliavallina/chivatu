var Chivatu=function(){"use strict";class s{constructor(e={}){return s.instance?s.instance:(s.instance=this,this.subscribers=new WeakMap,this.observer,this.options=Object.assign({threshold:[0,1]},e),this.isSupported()&&(this.observer=new IntersectionObserver(s=>{s.forEach(s=>{s.isIntersecting?this._loadElement(s.target,s.intersectionRatio):this._unloadElement(s.target)})},this.options)),this)}isSupported(){return"IntersectionObserver"in window}add(s,e){s instanceof NodeList?s.forEach(s=>this.add(s,e)):s&&!this.subscribers.has(s)&&(this.subscribers.set(s,e),this.observer.observe(s))}_loadElement(s,e){const{once:t,onVisible:i}=this.subscribers.get(s);"function"==typeof i&&i.call(null,s,e),t&&this.observer.unobserve(s)}_unloadElement(s){const{onHidden:e}=this.subscribers.get(s);"function"==typeof e&&e.call(null,s)}}return s}();
